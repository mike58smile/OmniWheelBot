\hypertarget{class_drive_class}{}\doxysection{Drive\+Class Class Reference}
\label{class_drive_class}\index{DriveClass@{DriveClass}}


Class implementing all movements, meassurements, reading from Encoders.  




{\ttfamily \#include $<$Drive.\+h$>$}



Collaboration diagram for Drive\+Class\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=217pt]{class_drive_class__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_drive_class_accb2b97167cad8aa4d927dc6c6e1eb16}{ramp\+Init}} (bool mot\+Select, int time\+Slope)
\begin{DoxyCompactList}\small\item\em Initialize ramp timer and sets ramp\+Init\+Done to true. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_drive_class_ab811e50a84a704824e37a8b2a6429aaf}{ramp\+Init}} (bool mot\+Select, int time\+Slope, int Speed\+Begin, bool optim=0)
\begin{DoxyCompactList}\small\item\em Initialize ramp timer and sets ramp\+Init\+Done to true. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_drive_class_ad18a96b8cc9762cc931aa3d6cf868669}{ramp\+Update}} (bool mot\+Select, int increment, bool optim=false)
\begin{DoxyCompactList}\small\item\em Increment speed when timer \texorpdfstring{$>$}{>}= time\+Slope (defined when called \mbox{\hyperlink{class_drive_class_accb2b97167cad8aa4d927dc6c6e1eb16}{ramp\+Init()}}) \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_drive_class_aef5772bb8a2193ea69c6a55b25850887}{Drive\+Class}} ()
\begin{DoxyCompactList}\small\item\em C\textquotesingle{}tor from \mbox{\hyperlink{class_state_class}{State\+Class}}, also initialize Encoder and PID objects. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_drive_class_af058246867930180e2e73d98d94075e9}{init}} ()
\begin{DoxyCompactList}\small\item\em Initialize motors and sets operating mode and output limits of speed PID regulators. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_drive_class_a37365361d8fc1a2e99526602670a4e8a}{loop}} ()
\begin{DoxyCompactList}\small\item\em Reads from encoders and handles main state machine -\/ State\+\_\+comm. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_drive_class_a79329dcb5ca9bdc8b36e82e7c0b8d2f2}{Acc\+Till\+Rotating\+\_\+init}} (bool mot\+Select, int time\+Slope)
\begin{DoxyCompactList}\small\item\em Init acceleration till motor starts rotating -\/ calls ramp\+Init and sets acc\+Till\+Rotating\+Done = 0. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_drive_class_a9f915ea6d23d4c27f731db55c0b7c48c}{Acc\+Till\+Rotating\+\_\+update}} (bool mot\+Select, int increment, unsigned int end\+Speed=0)
\begin{DoxyCompactList}\small\item\em Accelerate till motor starts rotating at speed \texorpdfstring{$>$}{>} end\+Speed. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_drive_class_ad2e6126c23a6d7b8ca855c23b5b7769a}{Decc\+Till\+Rotating\+\_\+init}} (bool mot\+Select, int time\+Slope, int speed\+Begin=0)
\begin{DoxyCompactList}\small\item\em Init decceleration till motor stops rotating. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_drive_class_a441b36561ac0cc7dae9a7442af7904ee}{Decc\+Till\+Rotating\+\_\+update}} (bool mot\+Select, unsigned int decrement, unsigned int end\+Speed=0)
\begin{DoxyCompactList}\small\item\em Deccelerate till motor stops rotating or ends at end\+Speed. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_drive_class_ae1bc182df0569903829a23d1b977b139}{Acc\+Till\+PWM\+\_\+init}} (bool mot\+Select, int time\+Slope)
\begin{DoxyCompactList}\small\item\em Init acceleration till PWM speed. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_drive_class_aab33dda485a98c5b71f77e1acc762450}{Acc\+Till\+PWM\+\_\+init}} (bool mot\+Select, int time\+Slope, int speed\+Begin, bool optim=0)
\begin{DoxyCompactList}\small\item\em Init acceleration from speed\+Begin to PWM speed. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_drive_class_adee65062113cefe6fc7a94396c1772e0}{Acc\+Till\+PWM\+\_\+update}} (bool mot\+Select, int increment, int end\+Speed, bool optim=0)
\begin{DoxyCompactList}\small\item\em Accelerate till motor starts rotating at speed \texorpdfstring{$>$}{>}= end\+Speed. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_drive_class_a66bb4c79289ff9d25699e6cb7fc000c9}{Decc\+Till\+PWM\+\_\+init}} (bool mot\+Select, int time\+Slope)
\begin{DoxyCompactList}\small\item\em Init decceleration till PWM speed. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_drive_class_ad0835fecb86c321e94a1409ced97951f}{Decc\+Till\+PWM\+\_\+init}} (bool mot\+Select, int time\+Slope, int speed\+Begin, bool optim=0)
\begin{DoxyCompactList}\small\item\em Init decceleration from speed\+Begin to PWM speed. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_drive_class_ab8878c242d66361e3d15d7c49e239c0c}{Decc\+Till\+PWM\+\_\+update}} (bool mot\+Select, unsigned int decrement, int end\+Speed, bool optim=0)
\begin{DoxyCompactList}\small\item\em Deccelerate till motor starts rotating at speed \texorpdfstring{$>$}{>} end\+Speed. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_drive_class_a875eeb410726a45e69096513210b7889}{Meassure\+\_\+deadband}} ()
\begin{DoxyCompactList}\small\item\em Deadband meassurement state machine. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_drive_class_a9564de87aa1cad0f4c1461746b9f0c3c}{Meassure\+\_\+linearity\+Ramp}} (unsigned int \mbox{\hyperlink{_state_8h_af1ee17c0956f0fbad7ddac68c0a7bdc8}{max\+Speed}}=70, int mot\+Select=0, bool optim=0)
\begin{DoxyCompactList}\small\item\em Linearity ramp meassurement state machine. \end{DoxyCompactList}\item 
const char $\ast$ \mbox{\hyperlink{class_drive_class_a4c83206ea5d62c72eaccdbdf2bc619fb}{print\+State\+\_\+deadband}} ()
\item 
const char $\ast$ \mbox{\hyperlink{class_drive_class_ab72727a4e72fa804c610868d9ed25fe3}{print\+State\+\_\+ramp}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
double \mbox{\hyperlink{class_drive_class_ad54982e8f532f5330038e817f85803f6}{pid\+\_\+\+Set1}} = 0
\item 
double \mbox{\hyperlink{class_drive_class_ac334a2786dab7b0012bcbed9362af3eb}{pid\+\_\+\+In1}} = 0
\item 
double \mbox{\hyperlink{class_drive_class_a029425aedf46cfd45533255750ea5fa2}{pid\+\_\+\+Out1}} = 0
\begin{DoxyCompactList}\small\item\em Define signals for speed PID reg on motor 1. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{class_drive_class_aec36216d760299b9ef19de2470ccd97d}{pid\+\_\+\+Set2}} = 0
\item 
double \mbox{\hyperlink{class_drive_class_aba97a141968bbc06bf6963226f8c84a0}{pid\+\_\+\+In2}} = 0
\item 
double \mbox{\hyperlink{class_drive_class_a3644e3c2fbbf291a54ba3875a9d8d859}{pid\+\_\+\+Out2}} = 0
\begin{DoxyCompactList}\small\item\em Define signals for speed PID reg on motor 2. \end{DoxyCompactList}\item 
PID \mbox{\hyperlink{class_drive_class_adc25d7e18fba0c6faa7bbc1e4a071a58}{pid1}}
\begin{DoxyCompactList}\small\item\em PID object for motor 1. \end{DoxyCompactList}\item 
PID \mbox{\hyperlink{class_drive_class_a1522b8234dfaea99d1d77e4730fe895f}{pid2}}
\begin{DoxyCompactList}\small\item\em PID object for motor 2. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Class implementing all movements, meassurements, reading from Encoders. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_drive_class_aef5772bb8a2193ea69c6a55b25850887}\label{class_drive_class_aef5772bb8a2193ea69c6a55b25850887}} 
\index{DriveClass@{DriveClass}!DriveClass@{DriveClass}}
\index{DriveClass@{DriveClass}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{DriveClass()}{DriveClass()}}
{\footnotesize\ttfamily Drive\+Class\+::\+Drive\+Class (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



C\textquotesingle{}tor from \mbox{\hyperlink{class_state_class}{State\+Class}}, also initialize Encoder and PID objects. 

\begin{DoxyNote}{Note}
This is the only constructor 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em state} & Reference to storage for all shared variables \\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_drive_class_ae1bc182df0569903829a23d1b977b139}\label{class_drive_class_ae1bc182df0569903829a23d1b977b139}} 
\index{DriveClass@{DriveClass}!AccTillPWM\_init@{AccTillPWM\_init}}
\index{AccTillPWM\_init@{AccTillPWM\_init}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{AccTillPWM\_init()}{AccTillPWM\_init()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Drive\+Class\+::\+Acc\+Till\+PWM\+\_\+init (\begin{DoxyParamCaption}\item[{bool}]{mot\+Select,  }\item[{int}]{time\+Slope }\end{DoxyParamCaption})}



Init acceleration till PWM speed. 


\begin{DoxyParams}{Parameters}
{\em mot\+Select} & \{0,1\} motor \\
\hline
{\em time\+Slope} & 1/\+Slope of speed accelerating ramp \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_drive_class_aab33dda485a98c5b71f77e1acc762450}\label{class_drive_class_aab33dda485a98c5b71f77e1acc762450}} 
\index{DriveClass@{DriveClass}!AccTillPWM\_init@{AccTillPWM\_init}}
\index{AccTillPWM\_init@{AccTillPWM\_init}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{AccTillPWM\_init()}{AccTillPWM\_init()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Drive\+Class\+::\+Acc\+Till\+PWM\+\_\+init (\begin{DoxyParamCaption}\item[{bool}]{mot\+Select,  }\item[{int}]{time\+Slope,  }\item[{int}]{speed\+Begin,  }\item[{bool}]{optim = {\ttfamily 0} }\end{DoxyParamCaption})}



Init acceleration from speed\+Begin to PWM speed. 


\begin{DoxyParams}{Parameters}
{\em mot\+Select} & \{0,1\} motor \\
\hline
{\em time\+Slope} & 1/\+Slope of speed accelerating ramp \\
\hline
{\em speed\+Begin} & Beginning speed of accelerating, also sent to motors \\
\hline
{\em optim} & Use optimized PWM speed \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_drive_class_adee65062113cefe6fc7a94396c1772e0}\label{class_drive_class_adee65062113cefe6fc7a94396c1772e0}} 
\index{DriveClass@{DriveClass}!AccTillPWM\_update@{AccTillPWM\_update}}
\index{AccTillPWM\_update@{AccTillPWM\_update}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{AccTillPWM\_update()}{AccTillPWM\_update()}}
{\footnotesize\ttfamily bool Drive\+Class\+::\+Acc\+Till\+PWM\+\_\+update (\begin{DoxyParamCaption}\item[{bool}]{mot\+Select,  }\item[{int}]{increment,  }\item[{int}]{end\+Speed,  }\item[{bool}]{optim = {\ttfamily 0} }\end{DoxyParamCaption})}



Accelerate till motor starts rotating at speed \texorpdfstring{$>$}{>}= end\+Speed. 


\begin{DoxyParams}{Parameters}
{\em mot\+Select} & \{0,1\} motor \\
\hline
{\em increment} & Value added to motor speed in each period \mbox{[}PWM\mbox{]} \\
\hline
{\em end\+Speed} & Function terminating speed \mbox{[}PWM\mbox{]} \\
\hline
{\em optim} & Use optimized PWM speed \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if current speed \texorpdfstring{$>$}{>}= end\+Speed (when optim = 1 -\/\texorpdfstring{$>$}{>} true if current speed \texorpdfstring{$>$}{>}= end\+Speed + optimized\+Spd.\+min\+PWM) 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Maybe the return calc when optim = 1 is not fully correct 
\end{DoxyNote}
\mbox{\Hypertarget{class_drive_class_a79329dcb5ca9bdc8b36e82e7c0b8d2f2}\label{class_drive_class_a79329dcb5ca9bdc8b36e82e7c0b8d2f2}} 
\index{DriveClass@{DriveClass}!AccTillRotating\_init@{AccTillRotating\_init}}
\index{AccTillRotating\_init@{AccTillRotating\_init}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{AccTillRotating\_init()}{AccTillRotating\_init()}}
{\footnotesize\ttfamily void Drive\+Class\+::\+Acc\+Till\+Rotating\+\_\+init (\begin{DoxyParamCaption}\item[{bool}]{mot\+Select,  }\item[{int}]{time\+Slope }\end{DoxyParamCaption})}



Init acceleration till motor starts rotating -\/ calls ramp\+Init and sets acc\+Till\+Rotating\+Done = 0. 


\begin{DoxyParams}{Parameters}
{\em mot\+Select} & \{0,1\} motor \\
\hline
{\em time\+Slope} & 1/\+Slope of speed accelerating ramp \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_drive_class_a9f915ea6d23d4c27f731db55c0b7c48c}\label{class_drive_class_a9f915ea6d23d4c27f731db55c0b7c48c}} 
\index{DriveClass@{DriveClass}!AccTillRotating\_update@{AccTillRotating\_update}}
\index{AccTillRotating\_update@{AccTillRotating\_update}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{AccTillRotating\_update()}{AccTillRotating\_update()}}
{\footnotesize\ttfamily bool Drive\+Class\+::\+Acc\+Till\+Rotating\+\_\+update (\begin{DoxyParamCaption}\item[{bool}]{mot\+Select,  }\item[{int}]{increment,  }\item[{unsigned int}]{end\+Speed = {\ttfamily 0} }\end{DoxyParamCaption})}



Accelerate till motor starts rotating at speed \texorpdfstring{$>$}{>} end\+Speed. 


\begin{DoxyParams}{Parameters}
{\em mot\+Select} & \{0,1\} motor \\
\hline
{\em increment} & Value added to motor speed in each period \mbox{[}PWM\mbox{]} \\
\hline
{\em end\+Speed} & Function terminating speed \mbox{[}enc\mbox{]} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if current speed \texorpdfstring{$>$}{>} end\+Speed, else false 
\end{DoxyReturn}
\mbox{\Hypertarget{class_drive_class_a66bb4c79289ff9d25699e6cb7fc000c9}\label{class_drive_class_a66bb4c79289ff9d25699e6cb7fc000c9}} 
\index{DriveClass@{DriveClass}!DeccTillPWM\_init@{DeccTillPWM\_init}}
\index{DeccTillPWM\_init@{DeccTillPWM\_init}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{DeccTillPWM\_init()}{DeccTillPWM\_init()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Drive\+Class\+::\+Decc\+Till\+PWM\+\_\+init (\begin{DoxyParamCaption}\item[{bool}]{mot\+Select,  }\item[{int}]{time\+Slope }\end{DoxyParamCaption})}



Init decceleration till PWM speed. 


\begin{DoxyParams}{Parameters}
{\em mot\+Select} & \{0,1\} motor \\
\hline
{\em time\+Slope} & 1/\+Slope of speed accelerating ramp \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_drive_class_ad0835fecb86c321e94a1409ced97951f}\label{class_drive_class_ad0835fecb86c321e94a1409ced97951f}} 
\index{DriveClass@{DriveClass}!DeccTillPWM\_init@{DeccTillPWM\_init}}
\index{DeccTillPWM\_init@{DeccTillPWM\_init}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{DeccTillPWM\_init()}{DeccTillPWM\_init()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Drive\+Class\+::\+Decc\+Till\+PWM\+\_\+init (\begin{DoxyParamCaption}\item[{bool}]{mot\+Select,  }\item[{int}]{time\+Slope,  }\item[{int}]{speed\+Begin,  }\item[{bool}]{optim = {\ttfamily 0} }\end{DoxyParamCaption})}



Init decceleration from speed\+Begin to PWM speed. 


\begin{DoxyParams}{Parameters}
{\em mot\+Select} & \{0,1\} motor \\
\hline
{\em time\+Slope} & 1/\+Slope of speed accelerating ramp \\
\hline
{\em speed\+Begin} & Beginning speed of deccelerating, also sent to motors \\
\hline
{\em optim} & Use optimized PWM speed \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_drive_class_ab8878c242d66361e3d15d7c49e239c0c}\label{class_drive_class_ab8878c242d66361e3d15d7c49e239c0c}} 
\index{DriveClass@{DriveClass}!DeccTillPWM\_update@{DeccTillPWM\_update}}
\index{DeccTillPWM\_update@{DeccTillPWM\_update}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{DeccTillPWM\_update()}{DeccTillPWM\_update()}}
{\footnotesize\ttfamily bool Drive\+Class\+::\+Decc\+Till\+PWM\+\_\+update (\begin{DoxyParamCaption}\item[{bool}]{mot\+Select,  }\item[{unsigned int}]{decrement,  }\item[{int}]{end\+Speed,  }\item[{bool}]{optim = {\ttfamily 0} }\end{DoxyParamCaption})}



Deccelerate till motor starts rotating at speed \texorpdfstring{$>$}{>} end\+Speed. 


\begin{DoxyParams}{Parameters}
{\em mot\+Select} & \{0,1\} motor \\
\hline
{\em decrement} & Value subtracted from motor speed in each period \mbox{[}PWM\mbox{]} \\
\hline
{\em end\+Speed} & Function terminating speed \mbox{[}PWM\mbox{]} \\
\hline
{\em optim} & Use optimized PWM speed \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if current speed \texorpdfstring{$<$}{<}= end\+Speed (when optim = 1 -\/\texorpdfstring{$>$}{>} true if current speed \texorpdfstring{$>$}{>}= end\+Speed -\/ optimized\+Spd.\+min\+PWM) 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
Maybe the return calc when optim = 1 is not fully correct 
\end{DoxyNote}
\mbox{\Hypertarget{class_drive_class_ad2e6126c23a6d7b8ca855c23b5b7769a}\label{class_drive_class_ad2e6126c23a6d7b8ca855c23b5b7769a}} 
\index{DriveClass@{DriveClass}!DeccTillRotating\_init@{DeccTillRotating\_init}}
\index{DeccTillRotating\_init@{DeccTillRotating\_init}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{DeccTillRotating\_init()}{DeccTillRotating\_init()}}
{\footnotesize\ttfamily void Drive\+Class\+::\+Decc\+Till\+Rotating\+\_\+init (\begin{DoxyParamCaption}\item[{bool}]{mot\+Select,  }\item[{int}]{time\+Slope,  }\item[{int}]{speed\+Begin = {\ttfamily 0} }\end{DoxyParamCaption})}



Init decceleration till motor stops rotating. 


\begin{DoxyParams}{Parameters}
{\em mot\+Select} & \{0,1\} motor \\
\hline
{\em time\+Slope} & 1/\+Slope of speed deccelerating ramp \\
\hline
{\em speed\+Begin} & Beginning speed of deccelerating, also sent to motors \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_drive_class_a441b36561ac0cc7dae9a7442af7904ee}\label{class_drive_class_a441b36561ac0cc7dae9a7442af7904ee}} 
\index{DriveClass@{DriveClass}!DeccTillRotating\_update@{DeccTillRotating\_update}}
\index{DeccTillRotating\_update@{DeccTillRotating\_update}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{DeccTillRotating\_update()}{DeccTillRotating\_update()}}
{\footnotesize\ttfamily bool Drive\+Class\+::\+Decc\+Till\+Rotating\+\_\+update (\begin{DoxyParamCaption}\item[{bool}]{mot\+Select,  }\item[{unsigned int}]{decrement,  }\item[{unsigned int}]{end\+Speed = {\ttfamily 0} }\end{DoxyParamCaption})}



Deccelerate till motor stops rotating or ends at end\+Speed. 


\begin{DoxyParams}{Parameters}
{\em mot\+Select} & \{0,1\} motor \\
\hline
{\em decrement} & Value subtracted from motor speed in each period \mbox{[}PWM\mbox{]} \\
\hline
{\em end\+Speed} & Function terminating speed \mbox{[}enc\mbox{]} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if current speed \texorpdfstring{$<$}{<}= end\+Speed 
\end{DoxyReturn}
\mbox{\Hypertarget{class_drive_class_af058246867930180e2e73d98d94075e9}\label{class_drive_class_af058246867930180e2e73d98d94075e9}} 
\index{DriveClass@{DriveClass}!init@{init}}
\index{init@{init}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily void Drive\+Class\+::init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Initialize motors and sets operating mode and output limits of speed PID regulators. 

\begin{DoxyNote}{Note}
Use in void setup() 
\end{DoxyNote}
\mbox{\Hypertarget{class_drive_class_a37365361d8fc1a2e99526602670a4e8a}\label{class_drive_class_a37365361d8fc1a2e99526602670a4e8a}} 
\index{DriveClass@{DriveClass}!loop@{loop}}
\index{loop@{loop}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{loop()}{loop()}}
{\footnotesize\ttfamily void Drive\+Class\+::loop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Reads from encoders and handles main state machine -\/ State\+\_\+comm. 

\begin{DoxyNote}{Note}
Use in void \mbox{\hyperlink{class_drive_class_a37365361d8fc1a2e99526602670a4e8a}{loop()}} after Comm.\+loop() and Serial\+Control.\+loop()! 
\end{DoxyNote}
\mbox{\Hypertarget{class_drive_class_a875eeb410726a45e69096513210b7889}\label{class_drive_class_a875eeb410726a45e69096513210b7889}} 
\index{DriveClass@{DriveClass}!Meassure\_deadband@{Meassure\_deadband}}
\index{Meassure\_deadband@{Meassure\_deadband}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{Meassure\_deadband()}{Meassure\_deadband()}}
{\footnotesize\ttfamily bool Drive\+Class\+::\+Meassure\+\_\+deadband (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Deadband meassurement state machine. 

\begin{DoxyReturn}{Returns}
true after end of calibration -\/ state enum is in its last state (End) 
\end{DoxyReturn}
\mbox{\Hypertarget{class_drive_class_a9564de87aa1cad0f4c1461746b9f0c3c}\label{class_drive_class_a9564de87aa1cad0f4c1461746b9f0c3c}} 
\index{DriveClass@{DriveClass}!Meassure\_linearityRamp@{Meassure\_linearityRamp}}
\index{Meassure\_linearityRamp@{Meassure\_linearityRamp}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{Meassure\_linearityRamp()}{Meassure\_linearityRamp()}}
{\footnotesize\ttfamily bool Drive\+Class\+::\+Meassure\+\_\+linearity\+Ramp (\begin{DoxyParamCaption}\item[{unsigned int}]{max\+Speed = {\ttfamily 70},  }\item[{int}]{mot\+Select = {\ttfamily 0},  }\item[{bool}]{optim = {\ttfamily 0} }\end{DoxyParamCaption})}



Linearity ramp meassurement state machine. 


\begin{DoxyParams}{Parameters}
{\em max\+Speed} & Maximal achieved speed (for optim = 1 -\/\texorpdfstring{$>$}{>} add optimized\+Spd.\+min\+PWM for maximal achieved speed) \\
\hline
{\em mot\+Select} & \{0,1\} motor \\
\hline
{\em optim} & Use optimized PWM speed \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true after end of meassurement -\/ state enum is in its last state (End) 
\end{DoxyReturn}
\mbox{\Hypertarget{class_drive_class_a4c83206ea5d62c72eaccdbdf2bc619fb}\label{class_drive_class_a4c83206ea5d62c72eaccdbdf2bc619fb}} 
\index{DriveClass@{DriveClass}!printState\_deadband@{printState\_deadband}}
\index{printState\_deadband@{printState\_deadband}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{printState\_deadband()}{printState\_deadband()}}
{\footnotesize\ttfamily const char $\ast$ Drive\+Class\+::print\+State\+\_\+deadband (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\mbox{\Hypertarget{class_drive_class_ab72727a4e72fa804c610868d9ed25fe3}\label{class_drive_class_ab72727a4e72fa804c610868d9ed25fe3}} 
\index{DriveClass@{DriveClass}!printState\_ramp@{printState\_ramp}}
\index{printState\_ramp@{printState\_ramp}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{printState\_ramp()}{printState\_ramp()}}
{\footnotesize\ttfamily const char $\ast$ Drive\+Class\+::print\+State\+\_\+ramp (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\mbox{\Hypertarget{class_drive_class_accb2b97167cad8aa4d927dc6c6e1eb16}\label{class_drive_class_accb2b97167cad8aa4d927dc6c6e1eb16}} 
\index{DriveClass@{DriveClass}!rampInit@{rampInit}}
\index{rampInit@{rampInit}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{rampInit()}{rampInit()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Drive\+Class\+::ramp\+Init (\begin{DoxyParamCaption}\item[{bool}]{mot\+Select,  }\item[{int}]{time\+Slope }\end{DoxyParamCaption})}



Initialize ramp timer and sets ramp\+Init\+Done to true. 


\begin{DoxyParams}{Parameters}
{\em mot\+Select} & \{0,1\} motor \\
\hline
{\em time\+Slope} & 1/\+Slope of speed accelerating ramp \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_drive_class_ab811e50a84a704824e37a8b2a6429aaf}\label{class_drive_class_ab811e50a84a704824e37a8b2a6429aaf}} 
\index{DriveClass@{DriveClass}!rampInit@{rampInit}}
\index{rampInit@{rampInit}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{rampInit()}{rampInit()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Drive\+Class\+::ramp\+Init (\begin{DoxyParamCaption}\item[{bool}]{mot\+Select,  }\item[{int}]{time\+Slope,  }\item[{int}]{Speed\+Begin,  }\item[{bool}]{optim = {\ttfamily 0} }\end{DoxyParamCaption})}



Initialize ramp timer and sets ramp\+Init\+Done to true. 


\begin{DoxyParams}{Parameters}
{\em mot\+Select} & \{0,1\} motor \\
\hline
{\em time\+Slope} & 1/\+Slope of speed accelerating ramp \\
\hline
{\em Speed\+Begin} & Beginning speed of ramp -\/ also sent to motors (when optim = 1 -\/\texorpdfstring{$>$}{>} add optimized\+Spd.\+min\+PWM for beginning speed) \\
\hline
{\em optim} & Use optimized PWM speed \\
\hline
{\em Time\+Slope} & 1/\+Slope of speed accelerating ramp \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_drive_class_ad18a96b8cc9762cc931aa3d6cf868669}\label{class_drive_class_ad18a96b8cc9762cc931aa3d6cf868669}} 
\index{DriveClass@{DriveClass}!rampUpdate@{rampUpdate}}
\index{rampUpdate@{rampUpdate}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{rampUpdate()}{rampUpdate()}}
{\footnotesize\ttfamily void Drive\+Class\+::ramp\+Update (\begin{DoxyParamCaption}\item[{bool}]{mot\+Select,  }\item[{int}]{increment,  }\item[{bool}]{optim = {\ttfamily false} }\end{DoxyParamCaption})}



Increment speed when timer \texorpdfstring{$>$}{>}= time\+Slope (defined when called \mbox{\hyperlink{class_drive_class_accb2b97167cad8aa4d927dc6c6e1eb16}{ramp\+Init()}}) 


\begin{DoxyParams}{Parameters}
{\em mot\+Select} & \{0,1\} motor \\
\hline
{\em increment} & Value added to motor speed in each period \mbox{[}PWM\mbox{]} \\
\hline
{\em optim} & Use optimized PWM speed \\
\hline
\end{DoxyParams}
\begin{DoxyWarning}{Warning}
ramp\+Init has to be done and all functions which uses ramp\+Update have to set ramp\+Init to false after end of procedure 
\end{DoxyWarning}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_drive_class_adc25d7e18fba0c6faa7bbc1e4a071a58}\label{class_drive_class_adc25d7e18fba0c6faa7bbc1e4a071a58}} 
\index{DriveClass@{DriveClass}!pid1@{pid1}}
\index{pid1@{pid1}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{pid1}{pid1}}
{\footnotesize\ttfamily PID Drive\+Class\+::pid1}



PID object for motor 1. 

\mbox{\Hypertarget{class_drive_class_a1522b8234dfaea99d1d77e4730fe895f}\label{class_drive_class_a1522b8234dfaea99d1d77e4730fe895f}} 
\index{DriveClass@{DriveClass}!pid2@{pid2}}
\index{pid2@{pid2}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{pid2}{pid2}}
{\footnotesize\ttfamily PID Drive\+Class\+::pid2}



PID object for motor 2. 

\mbox{\Hypertarget{class_drive_class_ac334a2786dab7b0012bcbed9362af3eb}\label{class_drive_class_ac334a2786dab7b0012bcbed9362af3eb}} 
\index{DriveClass@{DriveClass}!pid\_In1@{pid\_In1}}
\index{pid\_In1@{pid\_In1}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{pid\_In1}{pid\_In1}}
{\footnotesize\ttfamily double Drive\+Class\+::pid\+\_\+\+In1 = 0}

\mbox{\Hypertarget{class_drive_class_aba97a141968bbc06bf6963226f8c84a0}\label{class_drive_class_aba97a141968bbc06bf6963226f8c84a0}} 
\index{DriveClass@{DriveClass}!pid\_In2@{pid\_In2}}
\index{pid\_In2@{pid\_In2}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{pid\_In2}{pid\_In2}}
{\footnotesize\ttfamily double Drive\+Class\+::pid\+\_\+\+In2 = 0}

\mbox{\Hypertarget{class_drive_class_a029425aedf46cfd45533255750ea5fa2}\label{class_drive_class_a029425aedf46cfd45533255750ea5fa2}} 
\index{DriveClass@{DriveClass}!pid\_Out1@{pid\_Out1}}
\index{pid\_Out1@{pid\_Out1}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{pid\_Out1}{pid\_Out1}}
{\footnotesize\ttfamily double Drive\+Class\+::pid\+\_\+\+Out1 = 0}



Define signals for speed PID reg on motor 1. 

\mbox{\Hypertarget{class_drive_class_a3644e3c2fbbf291a54ba3875a9d8d859}\label{class_drive_class_a3644e3c2fbbf291a54ba3875a9d8d859}} 
\index{DriveClass@{DriveClass}!pid\_Out2@{pid\_Out2}}
\index{pid\_Out2@{pid\_Out2}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{pid\_Out2}{pid\_Out2}}
{\footnotesize\ttfamily double Drive\+Class\+::pid\+\_\+\+Out2 = 0}



Define signals for speed PID reg on motor 2. 

\mbox{\Hypertarget{class_drive_class_ad54982e8f532f5330038e817f85803f6}\label{class_drive_class_ad54982e8f532f5330038e817f85803f6}} 
\index{DriveClass@{DriveClass}!pid\_Set1@{pid\_Set1}}
\index{pid\_Set1@{pid\_Set1}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{pid\_Set1}{pid\_Set1}}
{\footnotesize\ttfamily double Drive\+Class\+::pid\+\_\+\+Set1 = 0}

\mbox{\Hypertarget{class_drive_class_aec36216d760299b9ef19de2470ccd97d}\label{class_drive_class_aec36216d760299b9ef19de2470ccd97d}} 
\index{DriveClass@{DriveClass}!pid\_Set2@{pid\_Set2}}
\index{pid\_Set2@{pid\_Set2}!DriveClass@{DriveClass}}
\doxysubsubsection{\texorpdfstring{pid\_Set2}{pid\_Set2}}
{\footnotesize\ttfamily double Drive\+Class\+::pid\+\_\+\+Set2 = 0}



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{_drive_8h}{Drive.\+h}}\item 
\mbox{\hyperlink{_drive_8cpp}{Drive.\+cpp}}\end{DoxyCompactItemize}
